---
const { collection } = Astro.props;

export function createPages() {
  return {
    route: `/individual/:slug`,
    data() {
      const allPosts = Astro.fetchContent('./post/*.md');
      return {allPosts};
    },
    params({data}) {
      data.allPosts.map((post, i) => {
        const params = {
          slug: post.url.replace('/post/', ''),
          index: i
        };
        return params;
      });
    },
    async props({ params }) {
      return {post: [allPosts[params.index]]};
    },
  };
}

const { post } = Astro.props;
const { params } = Astro.request;
---

<div id={params.slug}>
  <h1>{post.title}</h1>
</div>
